<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="css/style.css">
	<meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="57x57" href="./resources/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./resources/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./resources/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./resources/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./resources/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./resources/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./resources/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./resources/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./resources/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="./resources/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./resources/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./resources/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./resources/favicon-16x16.png">
</head>
<body>

    <h2>Animated Modal with Header and Footer</h2>
    <script src="../3D/scripts/jquery-2.2.0.js"></script>
    <script src="js/initscripts.js"></script>
    <!-- Trigger/Open The Modal -->
    <button id="save_scene" type="button">Save scene</button>
    <button id="myBtn" type="button">Open Menu</button>
    <button onclick="window.location = 'index.html'">Direct Entry (huehue)</button>

    <!-- The Modal -->
    <div id="modal-menu" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">×</span>
                <h2>Select components for address building</h2>
            </div>
            <div class="modal-body">
                <table>
                    <tr class="titles">
                        <td>Street</td>
                        <td>Number</td>
                        <td>Zip</td>
                    </tr>
                    <tr>
                        <td>
                        <select name="select_street" id="select_street">
                            <option value="default">Select Street</option>
                        </select>
                        </td>
                        <td>
                            <select name="select_streetnum" id="select_streetnum">
                                <option value="default">Select Street Number</option>
                            </select>
                        </td>
                        <td>
                            <select name="select_zip" id="select_zip">
                                <option value="default">Select Zip Code</option>
                            </select>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="modal-footer">
                <button id="build" type="button" onclick="startBuild()">Construct Addresses</button>
            </div>
        </div>
    </div>

<script>
initModal();

//DROPDOWN MENU SCRIPT
function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it
window.onclick = function (event) {
    if (!event.target.matches('.dropbtn')) {

        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
            }
        }
    } else if (event.target == modal) {
        modal.style.display = "none";
    }
}

function loadShit() {
    var poly = "&Bbox=" + xmin + "," + ymin + "," + xmax + "," + ymax;

}

function bboxToPolygon(xmin, ymin, xmax, ymax) {
    return [[[xmin, ymin], [xmin, ymax], [xmax, ymax], [xmax, ymin], [xmin, ymin]]];
}


//Save scene to server
var btn2 = document.getElementById("save_scene");
btn2.onclick = function () {
    console.log("clickity clack")
    $.getJSON("../3D/dtu.json", function (json) {
        var block = {
            scene_name: 'dtu.json',
            scene: json
        };
        console.log(block);

        var saveBlock = JSON.stringify(block);


        $.ajax({
            type: 'POST',
            url: 'https://api-geovizjs.rhcloud.com/saveScene/',
            data: saveBlock,
            contentType: 'application/json',
            success: function (data) {
                alert("success");
                console.log(data);
            },
            failure: function (errMsg) {
                alert("FAIL");
                console.log(errMsg);
            }
        });
    });
}

</script>

</body>
</html>
